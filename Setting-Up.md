
# Введение

---

Перед началом любого пентест-задания крайне важно настроить надежную и эффективную рабочую среду. Это включает организацию инструментов, настройку систем и обеспечение готовности всех необходимых ресурсов к использованию. Создавая хорошо структурированную тестовую инфраструктуру с самого начала, мы можем сократить время простоя, минимизировать ошибки и оптимизировать процесс оценки. В этом модуле мы рассмотрим фундаментальные технологии и конфигурации, которые поддерживают эту цель, фокусируясь на виртуализации и настройке правильной среды для нашей тестовой деятельности.

Предположим, что наша компания получила заказ от нового клиента (Inlanefreight) на проведение внешнего и внутреннего пентеста. Как уже упоминалось, перед проведением любого пентеста требуется правильная подготовка операционной системы. Наш клиент предоставляет нам внутренние системы, которые мы должны подготовить перед началом работы, чтобы тестирование на проникновение началось без задержек. Для этого нам необходимо соответствующим образом и эффективно подготовить необходимые операционные системы.

---

## Этапы и ситуации пентеста

Каждый пентест отличается по объему, ожидаемым результатам и среде в зависимости от сервисной линии и инфраструктуры клиента. Помимо различных этапов пентеста, через которые мы обычно проходим, наша деятельность может варьироваться в зависимости от типа пентеста, что может либо расширить, либо ограничить нашу рабочую среду и возможности.

Например, если мы проводим внутренний пентест, в большинстве случаев нам предоставляется внутренний хост, с которого мы можем работать. Предположим, этот хост имеет доступ в интернет (что обычно бывает). В таком случае нам нужен соответствующий виртуальный частный сервер (VPS) с нашими инструментами для быстрого доступа и загрузки соответствующих ресурсов для пентеста.

Тестирование может проводиться удаленно или на месте, в зависимости от предпочтений клиента. Если удаленно, мы обычно отправляем им устройство с предустановленным дистрибутивом пентеста по нашему выбору или предоставляем им настроенную виртуальную машину, которая будет связываться с нашей инфраструктурой через OpenVPN. Клиент выберет либо размещение образа (в который мы должны войти и немного настроить в первый день) и предоставит нам SSH-доступ (через белый список IP-адресов), либо предоставит нам прямой VPN-доступ в их сеть. Некоторые клиенты предпочитают не размещать никаких образов и предоставляют VPN-доступ, и в этом случае мы свободны тестировать с наших собственных локальных виртуальных машин Linux и Windows.

При выезде к клиенту на месте важно иметь как настроенную и полностью обновленную виртуальную машину Linux, так и Windows. Определенные инструменты работают лучше (или только) на Linux, а наличие виртуальной машины Windows делает определенные задачи (например, перечисление Active Directory) намного проще и эффективнее. Независимо от выбранной установки, мы должны направлять наших клиентов по плюсам и минусам и помогать им выбрать лучшее возможное решение, основанное на их сети и требованиях.

Это еще одна область пентеста, в которой мы должны быть универсальными и адаптивными как предметные эксперты. Мы должны убедиться, что мы полностью готовы с первого дня с правильными инструментами, чтобы предоставить клиенту наилучшую возможную ценность и углубленную оценку. Каждая среда отличается, и мы никогда не знаем, с чем столкнемся, когда начнем перечислять сеть и выявлять проблемы. Нам придется компилировать/устанавливать инструменты или загружать определенные скрипты на нашу атакующую виртуальную машину практически при каждой оценке, которую мы проводим. Настройка наших инструментов наилучшим образом гарантирует, что мы не потратим время впустую в начальные дни оценки. В идеале, нам следует вносить изменения в наши виртуальные машины оценки только для конкретных сценариев, с которыми мы сталкиваемся в ходе оценки.

---

## Настройка и эффективность

Со временем мы все собираем различный опыт и коллекции инструментов, с которыми мы наиболее знакомы. Структурированность имеет первостепенное значение, поскольку она повышает нашу эффективность в пентесте.
Необходимость поиска отдельных ресурсов и их зависимостей до начала работы может быть полностью устранена, если иметь доступ к заранее подготовленной, организованной и структурированной среде. Это требует подготовки и знания различных операционных систем, которые будут развиваться со временем.

Эффективность — это то, чего хотят и ожидают многие люди. Однако многие сегодня полагаются на огромное количество инструментов, до такой степени, что система становится медленной и больше не работает должным образом. Это неудивительно, учитывая большое количество приложений и решений, предлагаемых сегодня. Особенно новички ошеломлены, когда каждый источник информации имеет 50 разных мнений. Все они актуальны и зависят от конкретного случая, что не является плохим.

Но начинающие или даже опытные люди часто ищут другие решения, когда их рабочий спектр или обязанности в рабочей среде меняются. Затем возникает еще один сложный аспект: миграция со старого на новое.

Это часто требует значительных усилий и времени и все же не гарантирует, что эти инвестиции отразят ценность. Поэтому с этим модулем мы хотим создать основную настройку, в которой мы создаем рабочую среду для себя, которую мы знаем изнутри, можем настраивать сами и адаптировать независимо.
