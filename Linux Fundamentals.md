
# 1.1 Структура Linux

---

Linux, как вы, возможно, уже знаете, является операционной системой, используемой для персональных компьютеров, серверов и даже мобильных устройств. Однако Linux является фундаментальным столпом в кибербезопасности, известным своей надежностью, гибкостью и открытым исходным кодом. В этом разделе мы рассмотрим структуру Linux, историю, философию, архитектуру и иерархию файловой системы — важные знания для любого специалиста по кибербезопасности. Вы можете представить это как свой первый урок вождения на новой машине, получая базовое понимание автомобиля, из чего он состоит и почему он устроен именно так, как сейчас.

Для начала, давайте определим, что такое Linux. Linux — это операционная система, как Windows, macOS, iOS или Android. Операционная система (ОС) — это программное обеспечение, которое управляет всеми аппаратными ресурсами компьютера, обеспечивая связь между программными приложениями и аппаратными компонентами. В отличие от некоторых других операционных систем, Linux выпускается во многих различных дистрибутивах — часто называемых "дистро" — которые являются версиями Linux, адаптированными к различным потребностям и предпочтениям.

---

## История

Многие события привели к созданию первого ядра Linux и, в конечном счете, операционной системы Linux (ОС), начиная с выпуска операционной системы Unix Кеном Томпсоном и Деннисом Ритчи (которые оба работали на AT&T в то время) в 1970 году. Беркли Софтвер Дистрибьюшн (BSD) была выпущена в 1977 году, но поскольку она содержала код Unix, принадлежащий AT&T, последующий судебный иск ограничил развитие BSD. Ричард Столлман запустил проект GNU в 1983 году. Его целью было создание свободной Unix-подобной операционной системы, и часть его работы привела к созданию GNU General Public License (GPL). Проекты других людей за эти годы не привели к созданию работающего, свободного ядра, которое было бы широко принято, до создания ядра Linux.

Сначала Linux был личным проектом, начатым в 1991 году финским студентом по имени Линус Торвальдс. Его целью было создание нового, свободного ядра операционной системы. За эти годы ядро Linux превратилось из небольшого количества файлов, написанных на C и лицензированных с запретом на коммерческое распространение, в последнюю версию с более чем 23 миллионами строк исходного кода (без учета комментариев), лицензированную по GNU General Public License v2.

Linux доступен более чем в 600 дистрибутивах (или операционных системах, основанных на ядре Linux и поддерживающем программном обеспечении и библиотеках). Некоторые из самых популярных и хорошо известных — Ubuntu, Debian, Fedora, OpenSUSE, elementary, Manjaro, Gentoo Linux, RedHat и Linux Mint.

Linux обычно считается более безопасным, чем другие операционные системы, и хотя в прошлом у него было много уязвимостей ядра, их становится все меньше и меньше. Он менее подвержен вредоносным программам, чем операционные системы Windows, и очень часто обновляется. Linux также очень стабилен и обычно обеспечивает очень высокую производительность для конечного пользователя. Однако он может быть более сложным для начинающих и имеет не так много драйверов оборудования, как Windows.

Поскольку Linux является свободным и открытым исходным кодом, исходный код может быть изменен и распространен коммерчески или некоммерчески кем угодно. Операционные системы на базе Linux работают на серверах, мэйнфреймах, настольных компьютерах, встроенных системах, таких как роутеры, телевизоры, игровые консоли и многое другое. Общая операционная система Android, которая работает на смартфонах и планшетах, основана на ядре Linux, и благодаря этому Linux является наиболее широко установленной операционной системой.

Linux — это операционная система, как Windows, iOS, Android или macOS. ОС — это программное обеспечение, которое управляет всеми аппаратными ресурсами, связанными с нашим компьютером. Это означает, что ОС управляет всей связью между программным обеспечением и аппаратными средствами. Также существуют разные дистрибутивы (дистро). Это похоже на версии операционных систем Windows.

С интерактивными экземплярами мы получаем доступ к Pwnbox, настроенной версии Parrot OS. Это будет основная ОС, с которой мы будем работать через модули. Parrot OS — это дистрибутив Linux на базе Debian, который фокусируется на безопасности, конфиденциальности и разработке.

Представьте Linux как процветающую компанию, где его компоненты — это преданные сотрудники, каждый со своими конкретными ролями и обязанностями, чтобы операции работали гладко. Архитектура служит организационной структурой, описывающей, как эти сотрудники организованы в отделы и как они общаются для достижения эффективности и производительности. Философия представляет культуру компании и основные ценности, направляющие, как эти сотрудники работают индивидуально и совместно, продвигая принципы простоты, прозрачности и сотрудничества для достижения общих целей.

---

## Философия

Философия Linux сосредоточена на простоте, модульности и открытости. Она выступает за создание небольших программ одной цели, которые хорошо выполняют одну задачу. Эти программы могут быть объединены различными способами для выполнения сложных операций, способствуя эффективности и гибкости. Linux следует пяти основным принципам:

| **Принцип** | **Описание** |
|-------------|--------------|
| `Всё является файлом` | Все конфигурационные файлы для различных служб, работающих на операционной системе Linux, хранятся в одном или нескольких текстовых файлах. |
| `Маленькие программы с одной целью` | Linux предлагает много различных инструментов, с которыми мы будем работать, которые можно комбинировать для совместной работы. |
| `Возможность соединять программы вместе для выполнения сложных задач` | Интеграция и комбинация различных инструментов позволяют нам выполнять множество крупных и сложных задач, таких как обработка или фильтрация конкретных данных. |
| `Избегание навязчивых пользовательских интерфейсов` | Linux разработан для работы в основном с оболочкой (или терминалом), что дает пользователю больший контроль над операционной системой. |
| `Данные конфигурации хранятся в текстовом файле` | Примером такого файла является файл `/etc/passwd`, который хранит всех зарегистрированных пользователей в системе. |

---

## Компоненты

| **Компонент** | **Описание** |
|---------------|--------------|
| `Загрузчик` | Часть кода, который запускается для направления процесса загрузки для запуска операционной системы. Parrot Linux использует загрузчик GRUB. |
| `Ядро ОС` | Ядро является основным компонентом операционной системы. Оно управляет ресурсами для устройств ввода/вывода системы на аппаратном уровне. |
| `Демоны` | Фоновые службы в Linux называются "демонами". Их цель — обеспечить правильную работу ключевых функций, таких как планирование, печать и мультимедиа. Эти маленькие программы загружаются после загрузки или входа в компьютер. |
| `Оболочка ОС` | Оболочка операционной системы или интерпретатор командного языка (также известный как командная строка) является интерфейсом между ОС и пользователем. Этот интерфейс позволяет пользователю говорить ОС, что делать. Наиболее часто используемые оболочки — Bash, Tcsh/Csh, Ksh, Zsh и Fish. |
| `Графический сервер` | Это предоставляет графическую подсистему (сервер), называемую "X" или "X-server", которая позволяет графическим программам работать локально или удаленно в системе X-windowing. |
| `Оконный менеджер` | Также известен как графический пользовательский интерфейс (GUI). Существует много вариантов, включая GNOME, KDE, MATE, Unity и Cinnamon. Среда рабочего стола обычно имеет несколько приложений, включая файловые и веб-браузеры. Они позволяют пользователю получать доступ и управлять основными и часто используемыми функциями и службами операционной системы. |
| `Утилиты` | Приложения или утилиты — это программы, которые выполняют определенные функции для пользователя или другой программы. |

---

## Архитектура Linux

Операционная система Linux может быть разделена на слои:

| **Слой** | **Описание** |
|----------|--------------|
| `Аппаратное обеспечение` | Периферийные устройства, такие как системная оперативная память (RAM), жесткий диск, процессор и другие. |
| `Ядро` | Ядро операционной системы Linux, функцией которого является виртуализация и контроль общих компьютерных аппаратных ресурсов, таких как ЦП, выделенная память, доступные данные и другие. Ядро дает каждому процессу свои виртуальные ресурсы и предотвращает/смягчает конфликты между различными процессами. |
| `Оболочка` | Интерфейс командной строки (**CLI**), также известный как оболочка, в которую пользователь может вводить команды для выполнения функций ядра. |
| `Системные утилиты` | Делает доступными для пользователя все функциональные возможности операционной системы. |

---

## Иерархия файловой системы

Операционная система Linux структурирована в древовидной иерархии и документирована в [Стандарте иерархии файловой системы](http://www.pathname.com/fhs/) (FHS). Linux структурирован со следующими стандартными каталогами верхнего уровня:

![Диаграмма иерархии файловой системы Linux с корневым каталогом, разветвляющимся на папки: /bin, /boot, /dev, /etc, /lib, /media, /mnt, /opt, /home, /run, /root, /proc, /sys, /tmp, /usr, /var.](https://academy.hackthebox.com/storage/modules/18/NEW_filesystem.png)

| **Путь** | **Описание** |
|----------|--------------|
| `/` | Каталог верхнего уровня — это корневая файловая система и содержит все файлы, необходимые для загрузки операционной системы до монтирования других файловых систем, а также файлы, необходимые для загрузки других файловых систем. После загрузки все другие файловые системы монтируются в стандартных точках монтирования как подкаталоги корня. |
| `/bin` | Содержит важные исполняемые файлы команд. |
| `/boot` | Состоит из статического загрузчика, исполняемого ядра и файлов, необходимых для загрузки ОС Linux. |
| `/dev` | Содержит файлы устройств для облегчения доступа к каждому аппаратному устройству, подключенному к системе. |
| `/etc` | Локальные файлы конфигурации системы. Файлы конфигурации для установленных приложений также могут быть сохранены здесь. |
| `/home` | Каждый пользователь в системе имеет здесь подкаталог для хранения данных. |
| `/lib` | Общие файлы библиотек, необходимые для загрузки системы. |
| `/media` | Внешние съемные носители, такие как USB-накопители, монтируются здесь. |
| `/mnt` | Временная точка монтирования для обычных файловых систем. |
| `/opt` | Дополнительные файлы, такие как инструменты третьих сторон, могут быть сохранены здесь. |
| `/root` | Домашний каталог для пользователя root. |
| `/sbin` | Этот каталог содержит исполняемые файлы, используемые для администрирования системы (двоичные системные файлы). |
| `/tmp` | Операционная система и многие программы используют этот каталог для хранения временных файлов. Этот каталог обычно очищается при загрузке системы и может быть удален в другое время без предупреждения. |
| `/usr` | Содержит исполняемые файлы, библиотеки, man-файлы и т.д. |
| `/var` | Этот каталог содержит файлы переменных данных, такие как лог-файлы, почтовые ящики, файлы, связанные с веб-приложениями, файлы cron и многое другое. |





# 1.2 Дистрибутивы Linux

---

Дистрибутивы Linux - или дистрибы - это операционные системы, основанные на ядре Linux. Они используются для различных целей, от серверов и встраиваемых устройств до настольных компьютеров и мобильных телефонов. Дистрибутивы Linux похожи на различные филиалы или франшизы одной компании, каждая из которых адаптирована для обслуживания конкретных рынков или предпочтений клиентов. Хотя все они разделяют одних и тех же преданных сотрудников (компоненты), организационную структуру (архитектуру) и корпоративную культуру (философию), каждый дистрибутив предлагает собственные уникальные продукты и услуги (программные пакеты и конфигурации), настраивая опыт для удовлетворения разнообразных потребностей, при этом работая под единым брендом и ценностями Linux. Каждый дистрибутив Linux отличается собственным набором функций, пакетов и инструментов. Некоторые популярные примеры включают:

* [Ubuntu](https://ubuntu.com/)

* [Fedora](https://getfedora.org/)

* [CentOS](https://www.centos.org/)

* [Debian](https://www.debian.org/)

* [Red Hat Enterprise Linux](https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux)

Многие пользователи выбирают Linux для своих настольных компьютеров, потому что он бесплатный, имеет открытый исходный код и легко настраивается. Ubuntu и Fedora — два популярных выбора для настольного Linux и начинающих пользователей. Он также широко используется в качестве серверной операционной системы, поскольку является безопасным, стабильным и надежным, а также регулярно обновляется. Наконец, мы, как специалисты по кибербезопасности, часто предпочитаем Linux, потому что он имеет открытый исходный код, а это значит, что его исходный код доступен для изучения и настройки. Благодаря таким возможностям настройки мы можем оптимизировать и настраивать наш дистрибутив Linux так, как мы хотим, и при необходимости конфигурировать его только для определенных случаев использования.

Мы можем использовать эти дистрибутивы повсюду, включая (веб-)серверы, мобильные устройства, встраиваемые системы, облачные вычисления и настольные компьютеры. Для специалистов по кибербезопасности некоторые из наиболее популярных дистрибутивов Linux включают, но не ограничиваются следующими:

| | | |
|---|---|---|
| [ParrotOS](https://www.parrotsec.org/) | [Ubuntu](https://ubuntu.com/) | [Debian](https://www.debian.org/) |
| [Raspberry Pi OS](https://www.raspberrypi.com/software/) | [CentOS](https://www.centos.org/) | [BackBox](https://www.backbox.org/) |
| [BlackArch](https://www.blackarch.org/) | [Pentoo](https://www.pentoo.ch/) | |

Основные различия между различными дистрибутивами Linux заключаются во включенных пакетах, пользовательском интерфейсе и доступных инструментах. Kali Linux является наиболее популярным дистрибутивом для специалистов по кибербезопасности, включающим широкий спектр инструментов и пакетов, ориентированных на безопасность. Ubuntu широко распространен среди настольных пользователей, в то время как Debian популярен для серверов и встраиваемых систем. Наконец, Red Hat Enterprise Linux и CentOS популярны для корпоративных вычислений.

---

## Debian

Debian — широко используемый и уважаемый дистрибутив Linux, известный своей стабильностью и надежностью. Он используется для различных целей, включая настольные вычисления, серверы и встраиваемые системы. Он использует систему управления пакетами Advanced Package Tool (`apt`) для обработки обновлений программного обеспечения и исправлений безопасности. Система управления пакетами помогает поддерживать систему в актуальном и безопасном состоянии, автоматически загружая и устанавливая обновления безопасности, как только они становятся доступными. Это может выполняться вручную или настраиваться автоматически.

Debian может иметь более крутую кривую обучения, чем другие дистрибутивы, но он широко признан одним из самых гибких и настраиваемых дистрибутивов Linux. Конфигурация и настройка могут быть сложными, но также обеспечивают отличный контроль над системой, что может быть хорошо для опытных пользователей. Чем больше контроля мы имеем над системой Linux, тем более сложной она кажется. Однако, это только ощущение по сравнению с теми возможностями, которые мы получаем. Без изучения с необходимой глубиной мы можем потратить гораздо больше времени на настройку "простых" задач и процессов, чем если бы мы глубже изучили несколько команд и инструментов. Мы увидим это в разделах `Filter Contents` и `Find Files and Directories`.

Стабильность и надежность являются ключевыми достоинствами Debian. Дистрибутив известен своими релизами с долгосрочной поддержкой, которые могут обеспечивать обновления и исправления безопасности до пяти лет. Это может быть особенно важно для серверов и других систем, которые должны работать 24/7. У него были некоторые уязвимости, но сообщество разработчиков быстро выпускало патчи и обновления безопасности. Кроме того, Debian придерживается строгих принципов безопасности и конфиденциальности, и дистрибутив имеет хорошо зарекомендовавшую себя репутацию в области безопасности. Debian — универсальный и надежный дистрибутив Linux, который широко используется для различных целей. Его стабильность, надежность и приверженность безопасности делают его привлекательным выбором для различных вариантов использования, включая кибербезопасность.





# 1.3 Системная информация

---

Теперь давайте погрузимся в практическую работу, чтобы освоиться с использованием терминала и оболочки. Не забывайте, что вы всегда можете использовать команды `-h`, `--help` или man для получения справки при необходимости.

Поскольку мы будем работать с различными системами Linux, важно понимать их структуру, включая системные данные, процессы, сетевые конфигурации, пользователей/пользовательские настройки и каталоги, а также их связанные параметры. Ниже приведен список важных инструментов для сбора этой информации. Большинство этих инструментов предустановлены. Однако эти знания не только необходимы для рутинных задач Linux, но и играют ключевую роль при оценке конфигураций безопасности, выявлении уязвимостей или предотвращении потенциальных рисков безопасности в операционных системах Linux.

| **Команда** | **Описание** |
|-------------|--------------|
| `whoami` | Отображает имя текущего пользователя. |
| `id` | Возвращает идентификатор пользователя |
| `hostname` | Устанавливает или отображает имя текущей хост-системы. |
| `uname` | Выводит основную информацию о названии операционной системы и аппаратном обеспечении системы. |
| `pwd` | Возвращает имя рабочего каталога. |
| `ifconfig` | Утилита ifconfig используется для назначения или просмотра адреса сетевого интерфейса и/или настройки параметров сетевого интерфейса. |
| `ip` | Ip — это утилита для отображения или управления маршрутизацией, сетевыми устройствами, интерфейсами и туннелями. |
| `netstat` | Показывает статус сети. |
| `ss` | Ещё одна утилита для исследования сокетов. |
| `ps` | Показывает статус процессов. |
| `who` | Отображает, кто вошел в систему. |
| `env` | Выводит окружение или устанавливает и выполняет команду. |
| `lsblk` | Выводит список блочных устройств. |
| `lsusb` | Выводит список USB-устройств |
| `lsof` | Выводит список открытых файлов. |
| `lspci` | Выводит список PCI-устройств. |

Давайте прокрутим до конца страницы, запустим целевую машину, а затем подключимся к ней по SSH. Затем попробуйте повторить как можно больше примеров, показанных в этом разделе.

---

## Вход через SSH

`Secure Shell` (`SSH`) — это протокол, который позволяет клиентам получать доступ и выполнять команды или действия на удаленных компьютерах. На хостах и серверах на базе Linux, а также других Unix-подобных операционных системах, SSH является одним из постоянно установленных стандартных инструментов и предпочтительным выбором для многих администраторов для настройки и обслуживания компьютера через удаленный доступ. Это старый и очень проверенный протокол, который не требует и не предлагает графический пользовательский интерфейс (GUI). По этой причине он работает очень эффективно и занимает очень мало ресурсов. Мы используем этот тип подключения в следующих разделах и в большинстве других практических упражнений модуля, чтобы предоставить возможность опробовать изученные команды и действия в безопасной среде.

Мы можем подключиться к нашим целям со следующей командой:

```shell-session
Solrikk@htb[/htb]$ ssh htb-student@[IP адрес]
```

---

Теперь давайте рассмотрим несколько примеров на машине, к которой мы только что подключились.

#### Hostname

Команда `hostname` достаточно очевидна и просто выведет имя компьютера, к которому мы подключены

```shell-session
Solrikk@htb[/htb]$ hostname

nixfund
```

#### Whoami

Эта быстрая и простая команда может использоваться как в системах Windows, так и Linux для получения имени текущего пользователя. Во время оценки безопасности мы получаем обратный доступ к оболочке на хосте, и одна из первых действий по ситуационной осведомленности, которую мы должны выполнить, это выяснить, под каким пользователем мы работаем. Отсюда мы можем определить, есть ли у пользователя какие-либо особые привилегии/доступ.

```shell-session
cry0l1t3@htb[/htb]$ whoami

cry0l1t3
```

#### Id

Команда `id` расширяет команду `whoami` и выводит информацию о нашем эффективном членстве в группах и идентификаторах. Это может быть интересно для тестировщиков на проникновение, чтобы увидеть, какой доступ может иметь пользователь, и для системных администраторов, которые хотят проверить разрешения учетной записи и членство в группе. В этом выводе группа `hackthebox` представляет интерес, потому что она нестандартна, группа `adm` означает, что пользователь может читать файлы журналов в `/var/log` и потенциально получить доступ к конфиденциальной информации, членство в группе `sudo` представляет особый интерес, поскольку это означает, что наш пользователь может запускать некоторые или все команды как всемогущий пользователь `root`. Права sudo могут помочь нам повысить привилегии или могут быть признаком того, что системному администратору может потребоваться проверить разрешения и членство в группах, чтобы удалить любой доступ, который не требуется данному пользователю для выполнения его повседневных задач.

```shell-session
cry0l1t3@htb[/htb]$ id

uid=1000(cry0l1t3) gid=1000(cry0l1t3) groups=1000(cry0l1t3),1337(hackthebox),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),116(lpadmin),126(sambashare)
```

#### Uname

Давайте глубже изучим команду `uname`. Если мы введем `man uname` в нашем терминале, мы откроем man-страницу для этой команды, которая покажет возможные опции, которые мы можем запустить с командой, и результаты.

```
UNAME(1)                                    User Commands                                   UNAME(1)

NAME
       uname - print system information

SYNOPSIS
       uname [OPTION]...

DESCRIPTION
       Print certain system information.  With no OPTION, same as -s.

       -a, --all
              print all information, in the following order, except omit -p and -i if unknown:

       -s, --kernel-name
              print the kernel name

       -n, --nodename
              print the network node hostname

       -r, --kernel-release
              print the kernel release

       -v, --kernel-version
              print the kernel version

       -m, --machine
              print the machine hardware name

       -p, --processor
              print the processor type (non-portable)

       -i, --hardware-platform
              print the hardware platform (non-portable)

       -o, --operating-system
```

Запуск `uname -a` выведет всю информацию о машине в определенном порядке: имя ядра, имя хоста, версию ядра, версию ядра, имя аппаратного обеспечения машины и операционную систему. Флаг `-a` пропустит `-p` (тип процессора) и `-i` (аппаратная платформа), если они неизвестны.

```shell-session
cry0l1t3@htb[/htb]$ uname -a

Linux box 4.15.0-99-generic #100-Ubuntu SMP Wed Apr 22 20:32:56 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux
```

Из приведенной выше команды мы видим, что имя ядра — `Linux`, имя хоста — `box`, версия ядра — `4.15.0-99-generic`, версия ядра — `#100-Ubuntu SMP Wed Apr 22 20:32:56 UTC 2020` и так далее. Запуск любой из этих опций по отдельности даст нам конкретный вывод, который нас интересует.

#### Uname для получения версии ядра

Предположим, мы хотим вывести версию ядра, чтобы быстро найти потенциальные эксплойты для ядра. Мы можем ввести `uname -r`, чтобы получить эту информацию.

```shell-session
cry0l1t3@htb[/htb]$ uname -r

4.15.0-99-generic
```

С этой информацией мы могли бы пойти и искать «4.15.0-99-generic exploit», и первый [результат](https://www.exploit-db.com/exploits/47163) сразу же оказывается полезным для нас.

Настоятельно рекомендуется изучать команды и понимать, для чего они предназначены и какую информацию они могут предоставить. Хотя это немного утомительно, мы можем многому научиться, изучая страницы руководства по общим командам. Мы даже можем узнать о возможностях, о которых мы не знали, что они доступны с данной командой. Эта информация используется не только для работы с Linux. Однако она также будет использоваться позже для обнаружения уязвимостей и неправильных конфигураций в системе Linux, которые могут способствовать повышению привилегий. Вот несколько дополнительных упражнений, которые мы можем решить для тренировки, что поможет нам освоиться с некоторыми командами.

---

## О упражнениях Linux

Упражнения, предоставленные для изучения ОС Linux и ее команд, могут не всегда быть сразу понятными с точки зрения того, что вам нужно делать, и это совершенно нормально — это даже неизбежно. Как вы узнали из модуля «Процесс обучения», изучение чего-то нового может вызывать дискомфорт и стресс. Вы можете представить это как первый раз, когда вы сели за руль автомобиля и должны были ехать самостоятельно. Это было стрессово, потому что вам нужно было сосредоточиться на многих вещах одновременно. Но теперь, с опытом, вождение стало проще, хотя вы не так много учитесь, как раньше. Аналогично, в этом модуле вы можете оказаться в ситуациях, когда вы не уверены, что делать, но это нормально. В вашем пути в кибербезопасности вы часто будете сталкиваться с такими моментами, и они являются положительным признаком того, что вы изучаете что-то новое. Преодоление этих сложностей помогает вам улучшаться, даже если вы еще не полностью решили упражнение. В этом и заключается конечная цель — прогресс через обучение.

Упражнения намеренно разработаны так, чтобы постепенно выводить вас за рамки ваших текущих знаний в незнакомую территорию. Эта прогрессия является преднамеренной и гарантирует, что по мере того, как вы продолжаете практиковаться, ваш опыт и знания будут естественным образом расширяться. Хотя временами это может вызывать дискомфорт, этот процесс необходим для роста. С каждой новой задачей вы будете выходить за рамки того, что уже знаете, и при постоянных усилиях вы обнаружите, что ваше понимание и навыки развиваются почти автоматически. Продолжайте практиковаться, и вы постепенно станете более уверенными и способными в навигации по неизвестному.





# 1.4 Навигация

---

Навигация в Linux так же важна, как работа с мышью для стандартного пользователя Windows. С её помощью мы перемещаемся по системе и работаем с директориями и файлами, которые нам необходимы. Для этого мы используем различные команды и инструменты, которые выводят информацию о директориях или файлах, а также можем использовать дополнительные опции для оптимизации вывода под наши нужды.

Один из лучших способов изучения нового материала — это экспериментирование. Здесь мы рассмотрим разделы по навигации в Linux, созданию, перемещению, редактированию и удалению файлов и папок, поиску их в операционной системе, различным типам перенаправлений и файловым дескрипторам. Мы также рассмотрим сокращения, которые сделают нашу работу с оболочкой более легкой и комфортной. Рекомендуем экспериментировать на локально размещенной виртуальной машине. Убедитесь, что вы создали снимок (снапшот) вашей виртуальной машины на случай неожиданного повреждения системы.

Начнем с навигации. Прежде чем перемещаться по системе, нам нужно узнать, в какой директории мы находимся. Мы можем узнать наше местоположение с помощью команды `pwd`.

```bash
cry0l1t3@htb[~]$ pwd

/home/cry0l1t3
```

Для отображения всего содержимого директории достаточно только команды `ls`. У неё есть множество дополнительных опций, которые могут дополнить отображение содержимого текущей папки.

```bash
cry0l1t3@htb[~]$ ls

Desktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos
```

Использование этой команды без дополнительных опций покажет только директории и файлы. Однако мы также можем добавить опцию `-l`, чтобы отобразить больше информации об этих директориях и файлах.

```bash
cry0l1t3@htb[~]$ ls -l

total 32
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:37 Desktop
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Documents
drwxr-xr-x 3 cry0l1t3 htbacademy 4096 Nov 15 03:26 Downloads
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Music
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Pictures
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Public
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Templates
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Videos
```

Сначала мы видим общее количество блоков (по 1024 байта), используемых файлами и директориями, перечисленными в текущей директории, что указывает на общий используемый размер. Это означает, что используется 32 блока * 1024 байта/блок = 32 768 байт (или 32 КБ) дискового пространства. Далее мы видим несколько столбцов, которые структурированы следующим образом:

| **Содержимое столбца** | **Описание** |
|------------------------|--------------|
| `drwxr-xr-x` | Тип и права доступа |
| `2` | Количество жестких ссылок на файл/директорию |
| `cry0l1t3` | Владелец файла/директории |
| `htbacademy` | Группа-владелец файла/директории |
| `4096` | Размер файла или количество блоков, используемых для хранения информации о директории |
| `Nov 13 17:37` | Дата и время |
| `Desktop` | Имя директории |

Однако мы не увидим все, что находится в этой папке. В директории также могут быть скрытые файлы, имена которых начинаются с точки (например, `.bashrc` или `.bash_history`). Поэтому нам нужно использовать команду `ls -la` для `отображения всех` файлов директории:

```bash
cry0l1t3@htb[~]$ ls -la

total 403188
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:37 .bash_history
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:37 .bashrc
...SNIP...
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:37 Desktop
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Documents
drwxr-xr-x 3 cry0l1t3 htbacademy 4096 Nov 15 03:26 Downloads
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Music
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Pictures
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Public
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Templates
drwxr-xr-x 2 cry0l1t3 htbacademy 4096 Nov 13 17:34 Videos
```

Чтобы увидеть содержимое директории, нам не обязательно сначала переходить в неё. Мы также можем использовать `ls` для указания пути, содержимое которого нам нужно узнать.

```bash
cry0l1t3@htb[~]$ ls -l /var/

total 52
drwxr-xr-x  2 root root     4096 Mai 15 18:54 backups
drwxr-xr-x 18 root root     4096 Nov 15 16:55 cache
drwxrwsrwt  2 root whoopsie 4096 Jul 25  2018 crash
drwxr-xr-x 66 root root     4096 Mai 15 03:08 lib
drwxrwsr-x  2 root staff    4096 Nov 24  2018 local
<SNIP>
```

Мы можем сделать то же самое для перехода в директорию. Для перемещения по директориям мы используем команду `cd`. Давайте перейдем в директорию `/dev/shm`. Конечно, мы можем сначала перейти в директорию `/dev`, а затем в `/shm`. Тем не менее, мы также можем ввести полный путь и сразу перейти туда.

```bash
cry0l1t3@htb[~]$ cd /dev/shm

cry0l1t3@htb[/dev/shm]$
```

Поскольку мы ранее находились в домашней директории, мы можем быстро вернуться в директорию, в которой были в последний раз.

```bash
cry0l1t3@htb[/dev/shm]$ cd -

cry0l1t3@htb[~]$
```

Оболочка также предоставляет нам функцию автодополнения, которая упрощает навигацию. Если мы сейчас введем `cd /dev/s` и нажмем `[TAB] дважды`, мы получим все записи, начинающиеся с буквы `s` в директории `/dev/`.

```bash
cry0l1t3@htb[~]$ cd /dev/s [TAB 2x]

shm/ snd/
```

Если мы добавим букву `h` к букве `s`, оболочка завершит ввод, поскольку иначе в этой директории не будет папок, начинающихся с букв `sh`. Если мы теперь отобразим все содержимое директории, мы увидим только следующее содержимое.

```bash
cry0l1t3@htb[/dev/shm]$ ls -la /dev/shm

total 0
drwxrwxrwt  2 root root   40 Mai 15 18:31 .
drwxr-xr-x 17 root root 4000 Mai 14 20:45 ..
```

Первая запись с одной точкой (`.`) указывает на текущую директорию, в которой мы находимся. Вторая запись с двумя точками (`..`) представляет родительскую директорию `/dev`. Это означает, что мы можем перейти к родительской директории с помощью следующей команды.

```bash
cry0l1t3@htb[/dev/shm]$ cd ..

cry0l1t3@htb[/dev]$
```

Поскольку наша оболочка заполнена некоторыми записями, мы можем очистить оболочку с помощью команды `clear`. Однако сначала давайте вернемся в директорию `/dev/shm`, а затем выполним команду `clear` для очистки нашего терминала.

```bash
cry0l1t3@htb[/dev]$ cd shm && clear
```

Другой способ очистки терминала — использовать сочетание клавиш `[Ctrl] + [L]`. Мы также можем использовать клавиши со стрелками (`↑` или `↓`) для прокрутки истории команд, которая покажет нам команды, которые мы использовали ранее. Но мы также можем искать в истории команд с помощью сочетания клавиш `[Ctrl] + [R]` и вводить часть текста, который мы ищем.

